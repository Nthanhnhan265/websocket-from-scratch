<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebSocket client</title>
</head>
<body>
    <output id="messages"></output>

    <script>
        const messages = document.querySelector('#messages');
        const socket = new WebSocket('ws://localhost:9000')

        socket.onopen = (e)=> {
            console.log('connected')
            const id = 1
            const data = 
                [
                    {id: id, name: "Nhan",address: "41", job: "student"},
                    {id: id, name: "Nhan",address: "41", job: "student"},
                    {id: id, name: "Nhan",address: "41", job: "student"},
                    {id: id, name: "Nhan",address: "41", job: "student"},
                    {id: id, name: "Nhan",address: "41", job: "student"},
                    {id: id, name: "Nhan",address: "41", job: "student"},
                    {id: id, name: "Nhan",address: "41", job: "student"},
                    {id: id, name: "Nhan",address: "41", job: "student"},
                 ]
            
            // socket.send(JSON.stringify(data))
            // console.log('sending...')
        } 
        socket.onmessage = (message) => {
            console.log("You got a message from server: ",message)
            messages.innerHTML = JSON.parse(message.data)
        }
        socket.onerror = (error) => console.log("Websocket error",error)
        socket.onclose = (event)=> console.log('Disconected')
    </script>
</body>
</html>